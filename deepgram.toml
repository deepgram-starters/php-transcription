[meta]
title = "PHP Transcription"
description = "Get started using Deepgram's speech-to-text with this PHP demo app"
author = "Deepgram DX Team <devrel@deepgram.com> (https://developers.deepgram.com)"
repository = "https://github.com/deepgram-starters/php-transcription"
useCase = "transcription"
language = "php"
framework = "php"
sdk = "N/A"
tags = ["transcription", "stt", "speech-to-text", "asr", "pre-recorded", "php"]

[check]
command = ["command -v git", "command -v php", "command -v composer"]
message = "All prerequisites installed"

[install.pre]
command = "git submodule update --init --recursive"
message = "Submodules initialized"

[install]
command = ["composer install", "cd frontend && corepack pnpm install"]
message = "Dependencies installed"

[install.config]
sample = "sample.env"
output = ".env"

[start.pre]
command = ["test -f .env || (echo 'Error: .env not found. Run: cp sample.env .env' && exit 1)"]
message = "Environment validated"

[start]
command = ["php -S 0.0.0.0:8081 server.php", "cd frontend && pnpm run dev -- --port 8080 --no-open"]
parallel = true
message = "Application running on http://localhost:8080"

[update]
command = "git submodule update --remote --merge"
message = "Submodules updated"

[clean]
command = ["rm -rf vendor", "rm -rf frontend/node_modules", "rm -rf frontend/.vite"]
message = "Build artifacts cleaned"

[test]
command = "cd contracts && ./tests/run-transcription-app.sh"
message = "Tests complete"

[eject-frontend]
command = "make eject-frontend"
message = "Frontend ejected successfully"
